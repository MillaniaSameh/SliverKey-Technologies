@page "{pageNumber:int?}/{pageSize:int?}"
@model IndexModel

@if (Model.RssItemsList == null) 
{
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-text">No items to show.</h5>
        </div>
    </div>
}
else {
    @foreach (var item in Model.RssItemsList)
    {
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">@item.PubDate</h5>
                <p class="card-text mb-2 text-muted">
                    Published by @item.FeedTitle @item.Title
                </p>
                <p class="card-text">@item.Description</p>
                <a href="@item.Link" target="_blank" class="btn btn-primary">Original article</a>
                <form method="post" asp-page="/Index" asp-page-handler="ToggleFavrorite">
                    <input type="hidden" name="id" value="@item.Id" />
                    <button class="btn @(item.IsFavorite ? "btn-warning" : "btn-outline-warning")" 
                            style="float: right;"
                            type="submit">
                        <svg style="margin-top: -3px;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    }

    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center">
        @if (Model.TotalPages > 1)
        { @if (Model.PageNumber > 1)
          {
            <li class="page-item">
              <a
                class="page-link"
                href="@Url.Page("Index", new { pageNumber = Model.PageNumber - 1, pageSize = Model.PageSize })"
                >Previous</a
              >
            </li>
          } @if (Model.PageNumber > 3)
          {
            <li class="page-item">
              <a
                class="page-link"
                href="@Url.Page("Index", new { pageNumber = 1, pageSize = Model.PageSize })"
                >1</a
              >
            </li>
            @if (Model.PageNumber > 4)
            {
              <li class="page-item disabled">
                <span class="page-link">...</span>
              </li>
            }   } @for (int i = Math.Max(1, Model.PageNumber - 2); i <=
        Math.Min(Model.TotalPages, Model.PageNumber + 2); i++)
          {
            <li class="page-item @(i == Model.PageNumber ? "active" : "")">
              <a
                class="page-link"
                href="@Url.Page("Index", new { pageNumber = i, pageSize = Model.PageSize })"
                >@i</a
              >
            </li>
          } @if (Model.PageNumber < Model.TotalPages - 2)
          { @if (Model.PageNumber <
        Model.TotalPages - 3)
            {
              <li class="page-item disabled">
                <span class="page-link">...</span>
              </li>
            }
            <li class="page-item">
              <a
                class="page-link"
                href="@Url.Page("Index", new { pageNumber = Model.TotalPages, pageSize = Model.PageSize })"
                >@Model.TotalPages</a
              >
            </li>
          } @if (Model.PageNumber < Model.TotalPages)
          {
            <li class="page-item">
              <a
                class="page-link"
                href="@Url.Page("Index", new { pageNumber = Model.PageNumber + 1, pageSize = Model.PageSize })"
                >Next</a
              >
            </li>
          } }
      </ul>
    </nav>
}